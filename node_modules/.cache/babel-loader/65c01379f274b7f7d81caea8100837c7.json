{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{Badge,Button,Card,Dropdown,DropdownButton,Form}from\"react-bootstrap\";import ConfirmationModal from\"./../../../../components/Modal/ConfirmationModal\";import ModalComponent from\"./../../../../components/Modal/Modal\";import\"./Groups.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var API_URL=\"https://run.mocky.io/v3/6a493a14-4155-463c-9f08-24be7e91cb6d\";var Groups=function Groups(_ref){var userGroups=_ref.userGroups;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),initial=_useState2[0],setInitialData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),groups=_useState4[0],setGroups=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),idToConfirm=_useState8[0],setIdToConfirm=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showConfirmation=_useState10[0],setShowConfirmation=_useState10[1];var checkJoinedGroups=function checkJoinedGroups(){var joinedGroups=groups.filter(function(_ref2){var join=_ref2.join;return join===true;});// const data =  JSON.parse(sessionStorage.getItem('user'));\n// data.groups = joinedGroups;\nuserGroups(joinedGroups);//sessionStorage.setItem('user', JSON.stringify(data));\n};var loadData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_URL);case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setGroups(data);setInitialData(data);checkJoinedGroups();case 9:case\"end\":return _context.stop();}}},_callee);}));return function loadData(){return _ref3.apply(this,arguments);};}();useEffect(function(){loadData();return function(){};},[]);var handleSelected=function handleSelected(option){setGroups(initial);var filteredData=groups.filter(function(_ref4){var language=_ref4.language;return language===option;});if(filteredData.length>0){setGroups(filteredData);checkJoinedGroups();}};var handleSearchName=function handleSearchName(text){var groupName=text.target.value;setGroups(initial);var filteredData=groups.filter(function(_ref5){var name=_ref5.name;return name.trim()===groupName.trim();});if(filteredData.length>0){setGroups(filteredData);checkJoinedGroups();}};var handleGroups=function handleGroups(value,state){var newArray=groups.map(function(values){if(values.id===value){values.join=state;}return values;});setGroups(newArray);checkJoinedGroups();};var handleModel=function handleModel(id){handleGroups(id,true);setShow(true);};var handleAbandon=function handleAbandon(){setShowConfirmation(false);handleGroups(idToConfirm,false);};var handleModelConfirmation=function handleModelConfirmation(id){setShowConfirmation(true);setIdToConfirm(id);};return/*#__PURE__*/_jsxs(\"section\",{className:\"groups\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"groups__title\",children:\"Groups\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"groups__filters\",children:[/*#__PURE__*/_jsxs(DropdownButton,{id:\"dropdown-basic-button\",title:\"Dropdown button\",onSelect:handleSelected,children:[/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"Javascript\",children:\"Javascript\"}),/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"Typescript\",children:\"Typescript\"})]}),/*#__PURE__*/_jsx(Form.Group,{className:\"groups__filters__search\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Search\",onChange:handleSearchName})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"groups__cards\",children:groups.map(function(_ref6){var id=_ref6.id,image=_ref6.image,language=_ref6.language,name=_ref6.name,join=_ref6.join,description=_ref6.description;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Img,{className:\"card__img\",src:image}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",children:language})}),/*#__PURE__*/_jsx(\"h4\",{className:\"group-name\",children:name}),/*#__PURE__*/_jsx(\"p\",{children:description}),join&&/*#__PURE__*/_jsx(Badge,{variant:\"primary\",children:\"joined\"}),/*#__PURE__*/_jsxs(\"div\",{children:[!join&&/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){return handleModel(id);},children:\"Join\"}),join&&/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){return handleModelConfirmation(id);},children:\"Abandon\"})]})]})]},id),/*#__PURE__*/_jsx(ConfirmationModal,{show:showConfirmation,onClose:function onClose(){return setShowConfirmation(false);},handleConfirmation:handleAbandon})]});})}),/*#__PURE__*/_jsx(ModalComponent,{show:show,onClose:function onClose(){return setShow(false);}})]});};export default Groups;","map":{"version":3,"sources":["/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/src/container/Profile/components/Groups/Groups.js"],"names":["useEffect","useState","Badge","Button","Card","Dropdown","DropdownButton","Form","ConfirmationModal","ModalComponent","API_URL","Groups","userGroups","initial","setInitialData","groups","setGroups","show","setShow","idToConfirm","setIdToConfirm","showConfirmation","setShowConfirmation","checkJoinedGroups","joinedGroups","filter","join","loadData","fetch","response","json","data","handleSelected","option","filteredData","language","length","handleSearchName","text","groupName","target","value","name","trim","handleGroups","state","newArray","map","values","id","handleModel","handleAbandon","handleModelConfirmation","image","description"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport {\n  Badge,\n  Button,\n  Card,\n  Dropdown,\n  DropdownButton,\n  Form,\n} from \"react-bootstrap\";\nimport ConfirmationModal from \"./../../../../components/Modal/ConfirmationModal\";\nimport ModalComponent from \"./../../../../components/Modal/Modal\";\nimport \"./Groups.scss\";\n\nconst API_URL = \"https://run.mocky.io/v3/6a493a14-4155-463c-9f08-24be7e91cb6d\";\n\nconst Groups = ({userGroups}) => {\n  const [initial, setInitialData] = useState([]);\n  const [groups, setGroups] = useState([]);\n  const [show, setShow] = useState(false);\n  const [idToConfirm, setIdToConfirm] = useState('');\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  const checkJoinedGroups = () => {\n    const joinedGroups = groups.filter( ({join}) => join === true);\n    // const data =  JSON.parse(sessionStorage.getItem('user'));\n    // data.groups = joinedGroups;\n    userGroups(joinedGroups);\n    //sessionStorage.setItem('user', JSON.stringify(data));\n  };\n\n  const loadData = async () => {\n    const response = await fetch(API_URL);\n    const data = await response.json();\n    setGroups(data);\n    setInitialData(data);\n    checkJoinedGroups();\n  };\n\n  useEffect(() => {\n    loadData();\n    return () => {};\n  }, []);\n\n  const handleSelected = (option) => {\n    setGroups(initial);\n    const filteredData = groups.filter(({ language }) => language === option);\n    if (filteredData.length > 0) {\n      setGroups(filteredData);\n      checkJoinedGroups();\n    }\n  };\n\n  const handleSearchName = (text) => {\n    const groupName = text.target.value;\n    setGroups(initial);\n    const filteredData = groups.filter(\n      ({ name }) => name.trim() === groupName.trim()\n    );\n    if (filteredData.length > 0) {\n      setGroups(filteredData);\n      checkJoinedGroups();\n    }\n  };\n\n  const handleGroups = (value, state) => {\n    const newArray = groups.map((values) => {\n      if (values.id === value) {\n        values.join = state;\n      }\n      return values;\n    });\n    setGroups(newArray);\n    checkJoinedGroups();\n  };\n\n  const handleModel = (id) => {\n    handleGroups(id, true);\n    setShow(true);\n  };\n\n  const handleAbandon = () => {\n    setShowConfirmation(false);\n    handleGroups(idToConfirm, false);\n  };\n\n  const handleModelConfirmation = (id) => {\n    setShowConfirmation(true);\n    setIdToConfirm(id);\n  };\n\n  return (\n    <section className=\"groups\">\n      <h3 className=\"groups__title\">Groups</h3>\n      <div className=\"groups__filters\">\n        <DropdownButton\n          id=\"dropdown-basic-button\"\n          title=\"Dropdown button\"\n          onSelect={handleSelected}\n        >\n          <Dropdown.Item eventKey=\"all\">All</Dropdown.Item>\n          <Dropdown.Item eventKey=\"Javascript\">Javascript</Dropdown.Item>\n          <Dropdown.Item eventKey=\"Typescript\">Typescript</Dropdown.Item>\n        </DropdownButton>\n        <Form.Group className=\"groups__filters__search\">\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Search\"\n            onChange={handleSearchName}\n          />\n        </Form.Group>\n      </div>\n      <div className=\"groups__cards\">\n        {groups.map(({ id, image, language, name, join, description }) => (\n          <>\n            <Card key={id}>\n              <Card.Img className=\"card__img\" src={image} />\n              <Card.Body>\n                <p>\n                  <Badge variant=\"secondary\">{language}</Badge>\n                </p>\n                <h4 className=\"group-name\">{name}</h4>\n                <p>{description}</p>\n                {join && <Badge variant=\"primary\">joined</Badge>}\n                <div>\n                  {!join && (\n                    <Button variant=\"secondary\" onClick={() => handleModel(id)}>\n                      Join\n                    </Button>\n                  )}\n                  {join && (\n                    <Button\n                      variant=\"secondary\"\n                      onClick={() => handleModelConfirmation(id)}\n                    >\n                      Abandon\n                    </Button>\n                  )}\n                </div>\n              </Card.Body>\n            </Card>\n            <ConfirmationModal\n              show={showConfirmation}\n              onClose={() => setShowConfirmation(false)}\n              handleConfirmation={handleAbandon}\n            />\n          </>\n        ))}\n      </div>\n      <ModalComponent show={show} onClose={() => setShow(false)} />\n    </section>\n  );\n};\nexport default Groups;\n"]},"metadata":{},"sourceType":"module"}