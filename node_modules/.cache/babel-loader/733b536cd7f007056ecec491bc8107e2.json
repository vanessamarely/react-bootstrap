{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{Badge,Button,Card}from\"react-bootstrap\";import ConfirmationModal from\"./../../../../components/Modal/ConfirmationModal\";import ModalComponent from\"./../../../../components/Modal/Modal\";import\"./Events.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var API_URL=\"https://run.mocky.io/v3/4c755975-6142-459a-9bb8-2cc37efadb7e\";var Events=function Events(_ref){var userEvents=_ref.userEvents;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),eventList=_useState2[0],setEventList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),idToConfirm=_useState6[0],setIdToConfirm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showConfirmation=_useState8[0],setShowConfirmation=_useState8[1];var checkJoinedGEvents=function checkJoinedGEvents(){var joinedEvents=eventList.filter(function(_ref2){var join=_ref2.join;return join===true;});// const data =  JSON.parse(sessionStorage.getItem('user'));\n// data.events = joinedEvents;\nuserEvents(joinedEvents);//sessionStorage.setItem('user', JSON.stringify(data));\n};var loadData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_URL);case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setEventList(data);checkJoinedGEvents();case 8:case\"end\":return _context.stop();}}},_callee);}));return function loadData(){return _ref3.apply(this,arguments);};}();useEffect(function(){loadData();return function(){};},[]);var handleEvents=function handleEvents(value,state){var newArray=eventList.map(function(values){if(values.id===value){values.join=state;}return values;});setEventList(newArray);checkJoinedGEvents();};var handleModel=function handleModel(id){handleEvents(id,true);setShow(true);};var handleConfirmation=function handleConfirmation(){setShowConfirmation(false);handleEvents(idToConfirm,false);};var handleModelConfirmation=function handleModelConfirmation(id){setShowConfirmation(true);setIdToConfirm(id);};return/*#__PURE__*/_jsxs(\"section\",{className:\"events\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"events__title\",children:\"Events\"}),/*#__PURE__*/_jsx(\"div\",{className:\"events__cards\",children:eventList.map(function(_ref4,index){var image=_ref4.image,id=_ref4.id,name=_ref4.name,join=_ref4.join;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Img,{className:\"card__img\",src:image}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"event-name\",children:name}),join&&/*#__PURE__*/_jsx(Badge,{variant:\"primary\",children:\"joined\"}),/*#__PURE__*/_jsxs(\"div\",{children:[!join&&/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){return handleModel(id);},children:\"Join\"}),join&&/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){return handleModelConfirmation(id);},children:\"Abandon\"})]})]})]},index),/*#__PURE__*/_jsx(ConfirmationModal,{show:showConfirmation,onClose:function onClose(){return setShowConfirmation(false);},handleConfirmation:handleConfirmation})]});})}),/*#__PURE__*/_jsx(ModalComponent,{show:show,onClose:function onClose(){return setShow(false);}})]});};export default Events;","map":{"version":3,"sources":["/Users/vanessaaristizabal/development/react-projects/taller-comfeco/react-bootstrap/src/container/Profile/components/Events/Events.js"],"names":["useEffect","useState","Badge","Button","Card","ConfirmationModal","ModalComponent","API_URL","Events","userEvents","eventList","setEventList","show","setShow","idToConfirm","setIdToConfirm","showConfirmation","setShowConfirmation","checkJoinedGEvents","joinedEvents","filter","join","loadData","fetch","response","json","data","handleEvents","value","state","newArray","map","values","id","handleModel","handleConfirmation","handleModelConfirmation","index","image","name"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Badge, Button, Card } from \"react-bootstrap\";\nimport ConfirmationModal from \"./../../../../components/Modal/ConfirmationModal\";\nimport ModalComponent from \"./../../../../components/Modal/Modal\";\nimport \"./Events.scss\";\n\nconst API_URL = \"https://run.mocky.io/v3/4c755975-6142-459a-9bb8-2cc37efadb7e\";\n\nconst Events = ({userEvents}) => {\n  const [eventList, setEventList] = useState([]);\n  const [show, setShow] = useState(false);\n  const [idToConfirm, setIdToConfirm] = useState('');\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  const checkJoinedGEvents = () => {\n    const joinedEvents = eventList.filter( ({join}) => join === true);\n    // const data =  JSON.parse(sessionStorage.getItem('user'));\n    // data.events = joinedEvents;\n    userEvents(joinedEvents);\n    //sessionStorage.setItem('user', JSON.stringify(data));\n  };\n\n  const loadData = async () => {\n    const response = await fetch(API_URL);\n    const data = await response.json();\n    setEventList(data);\n    checkJoinedGEvents();\n  };\n\n  useEffect(() => {\n    loadData();\n    return () => {};\n  }, []);\n\n  const handleEvents = (value, state) => {\n    const newArray = eventList.map((values) => {\n      if (values.id === value) {\n        values.join = state;\n      }\n      return values;\n    });\n    setEventList(newArray);\n    checkJoinedGEvents();\n  };\n\n  const handleModel = (id) => {\n    handleEvents(id, true);\n    setShow(true);\n  };\n\n  const handleConfirmation = () => {\n    setShowConfirmation(false);\n    handleEvents(idToConfirm, false);\n  };\n\n  const handleModelConfirmation = (id) => {\n    setShowConfirmation(true);\n    setIdToConfirm(id);\n  };\n\n  return (\n    <section className=\"events\">\n      <h3 className=\"events__title\">Events</h3>\n      <div className=\"events__cards\">\n        {eventList.map(({ image, id, name, join }, index) => (\n          <>\n            <Card key={index}>\n              <Card.Img className=\"card__img\" src={image} />\n              <Card.Body>\n                <h4 className=\"event-name\">{name}</h4>\n                {join && <Badge variant=\"primary\">joined</Badge>}\n                <div>\n                  {!join && (\n                    <Button variant=\"secondary\" onClick={() => handleModel(id)}>\n                      Join\n                    </Button>\n                  )}\n                  {join && (\n                    <Button\n                      variant=\"secondary\"\n                      onClick={() => handleModelConfirmation(id)}\n                    >\n                      Abandon\n                    </Button>\n                  )}\n                </div>\n              </Card.Body>\n            </Card>\n            <ConfirmationModal\n              show={showConfirmation}\n              onClose={() => setShowConfirmation(false)}\n              handleConfirmation={handleConfirmation}\n            />\n          </>\n        ))}\n      </div>\n      <ModalComponent show={show} onClose={() => setShow(false)} />\n    </section>\n  );\n};\n\nexport default Events;\n"]},"metadata":{},"sourceType":"module"}